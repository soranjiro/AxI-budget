# AxI-budget 機能ガイド

---

## 📋 目次

1. [概要](#概要)
2. [現在利用可能な機能](#現在利用可能な機能)
3. [各機能の詳細](#各機能の詳細)
4. [開発者向け機能](#開発者向け機能)
5. [今後実装予定の機能](#今後実装予定の機能)

---

## 概要

AxI-budgetは、**ローカルファースト**の家計管理PWAアプリです。現在はユーザー登録不要で、ブラウザ上でローカルに完結して動作します。全てのデータはブラウザのIndexedDBに安全に保存され、オフラインでも利用可能です。

**特徴:**
- 🔐 **ユーザー登録不要** - すぐに使い始められる
- 📱 **PWA対応** - ホーム画面に追加してアプリのように使用可能
- 💾 **完全ローカル** - データは全てブラウザに保存
- 📊 **高機能分析** - 豊富なグラフとレポート機能
- ⚡ **高速動作** - IndexedDBによる非同期処理

---

## 現在利用可能な機能

### ✅ 基本機能

| 機能 | 状態 | 説明 |
|-----|-----|-----|
| 🏠 **ダッシュボード** | 完成 | 月次サマリー、予算進捗、最近の取引を一覧表示 |
| 💰 **取引管理** | 完成 | 収入・支出の記録、編集、削除、検索 |
| 📊 **予算管理** | 完成 | 予算設定、進捗追跡、アラート |
| 📈 **レポート分析** | 完成 | 5種類の分析タブと豊富なグラフ表示 |

### ✅ PWA機能

| 機能 | 状態 | 説明 |
|-----|-----|-----|
| 📱 **インストール可能** | 完成 | ホーム画面に追加してアプリとして利用 |
| 🔄 **オフライン対応** | 完成 | ネットワークなしでも完全に動作 |
| 💾 **データ永続化** | 完成 | ブラウザを閉じてもデータが保持される |
| ⚡ **高速起動** | 完成 | Service Workerによるキャッシュ戦略 |

### 🔄 準備中機能

| 機能 | 状態 | 説明 |
|-----|-----|-----|
| 🤝 **立て替え精算** | 開発中 | 友人との割り勘・立て替え管理 |
| 👥 **グループ機能** | 開発中 | 複数人でのグループ家計簿 |
| ☁️ **クラウド同期** | 計画中 | デバイス間でのデータ同期 |

---

## 各機能の詳細

### 🏠 ダッシュボード

**概要:** アプリの中心となる画面で、家計の現状を一目で把握できます。

**機能詳細:**
- **月次サマリー**: 今月の収支、予算残高、前払い残高
- **予算進捗**: 設定した予算の使用状況をプログレスバーで表示
- **最近の取引**: 直近の取引履歴を時系列で表示
- **クイックアクション**: 新しい取引や予算の追加

**利用シーン:**
- 毎日の家計状況の確認
- 月末の家計振り返り
- 予算超過の早期発見

### 💰 取引管理

**概要:** 日々の収入・支出を記録・管理する機能です。

**機能詳細:**

#### 取引の追加
- **金額入力**: 数値入力フィールド
- **説明**: 取引の詳細説明
- **カテゴリ**: 食費、交通費、娯楽費、生活費、その他から選択
- **取引種別**:
  - 収支: 収入 / 支出
  - タイプ: 実支出（personal） / 立て替え（advance）
- **日付**: カレンダー選択
- **予算紐付け**: 設定済み予算との関連付け
- **タグ**: 自由なタグ付け

#### 取引の管理
- **一覧表示**: 取引履歴の表示
- **フィルタリング**: 期間、カテゴリ、種別での絞り込み
- **編集・削除**: 既存取引の修正・削除
- **検索**: 説明文での検索

**データ構造:**
```typescript
interface Transaction {
  id: string
  description: string
  amount: number
  category: string
  type: 'expense' | 'income'
  transactionType: 'personal' | 'advance'
  date: string
  tags: string[]
  budgetId?: string
  createdAt: string
  updatedAt: string
}
```

### 📊 予算管理

**概要:** 月次・年次の予算を設定し、支出を管理する機能です。

**機能詳細:**

#### 予算の設定
- **予算名**: 分かりやすい名前を設定
- **金額**: 予算の上限額
- **カテゴリ**: 対象となるカテゴリ
- **期間**: 月次 / 年次
- **アラート設定**: 80%使用時の通知（デフォルト）

#### 予算の追跡
- **使用状況**: リアルタイムでの使用額計算
- **進捗表示**: プログレスバーでの視覚化
- **残額表示**: 予算残高の表示
- **超過警告**: 予算超過時の警告表示

**自動計算:**
- 関連する取引から自動で使用額を計算
- `personal`タイプの`expense`取引のみを対象
- 月次予算は該当月の取引のみを集計

### 📈 レポート分析

**概要:** 蓄積されたデータから、家計の傾向や分析を行う高機能レポート機能です。

#### 5つの分析タブ

**1. 📊 概要タブ**
- 総収入・総支出・残高の表示
- 月間平均値の計算
- 最大・最小取引額の表示
- 取引件数の統計

**2. 💰 予算分析タブ**
- 予算対実績の比較グラフ
- カテゴリ別予算進捗
- 予算達成率の表示
- 予算超過アラート

**3. 🥧 カテゴリ分析タブ**
- カテゴリ別支出の円グラフ
- 支出割合の表示
- カテゴリ別トレンド分析

**4. 📈 トレンド分析タブ**
- 月次収支の推移（線グラフ）
- 日次支出パターン（棒グラフ）
- 前月比較機能

**5. 💸 前払い分析タブ**
- 立て替え取引の管理
- 前払い残高の追跡
- 精算予定の表示

#### グラフライブラリ
- **Recharts**: 美しく、インタラクティブなグラフ表示
- **レスポンシブ対応**: デバイスサイズに応じて最適化
- **リアルタイム更新**: データ変更時の自動更新

### 🔐 ゲストモード（認証機能）

**概要:** ユーザー登録不要でアプリを利用できる機能です。

**機能詳細:**
- **自動ゲストアカウント生成**: `guest-{timestamp}`形式のID
- **データ永続化**: IndexedDBによる安全な保存
- **将来拡張**: AWS Cognitoへのアップグレード対応準備済み

---

## 開発者向け機能

### 🛠️ IndexedDB デバッグツール

開発モードでは、ブラウザコンソールから以下のコマンドが利用可能です：

```javascript
// 全データの確認
await indexedDBUtils.logAllData()

// サンプルデータの追加
await indexedDBUtils.importSampleData()

// データのエクスポート
const exportedData = await indexedDBUtils.exportData()

// 全データのクリア
await indexedDBUtils.clearAllData()
```

### 📊 技術仕様

**フロントエンド:**
- React 18 + TypeScript
- Vite（高速ビルド）
- Tailwind CSS（ユーティリティファースト）
- Zustand（状態管理）
- IndexedDB（データ永続化）
- Recharts（グラフ表示）

**データベース設計:**
```typescript
// AxiBudgetDB (version: 1)
{
  transactions: {
    keyPath: 'id',
    indexes: ['date', 'category', 'type', 'transactionType', 'budgetId', 'createdAt']
  },
  budgets: {
    keyPath: 'id',
    indexes: ['category', 'period', 'createdAt']
  },
  auth: {
    keyPath: 'key'
  }
}
```

**パフォーマンス特性:**
- IndexedDBによる非同期処理
- インデックス最適化によるクエリ高速化
- 仮想化による大量データ処理対応
- Service Workerによるキャッシュ戦略

---

## 今後実装予定の機能

### 🤝 立て替え精算機能（開発中）

**概要:** 友人や家族との立て替えを管理し、最適な精算方法を提案する機能

**予定機能:**
- 立て替え取引の記録
- 債務関係の自動計算
- 最適精算計算アルゴリズム
- 精算状況の可視化

### 👥 グループ機能（開発中）

**概要:** 複数人でのグループ家計簿機能

**予定機能:**
- グループ作成・招待（6桁コード / QRコード）
- リアルタイムデータ共有
- グループ内支出の自動分割
- メンバー別精算計算

### ☁️ クラウド同期機能（計画中）

**概要:** デバイス間でのデータ同期機能

**予定機能:**
- AWS Cognito認証
- DynamoDBとの双方向同期
- 競合解決機能
- オフライン・オンライン切り替え

**技術基盤（準備済み）:**
- AWS Lambda（Rust + Axum）
- Amazon DynamoDB
- AWS Cognito
- Terraform IaC

---

## 🚀 始め方

1. **アクセス**: [AxI-budget](https://your-domain.com) にアクセス
2. **インストール**: ブラウザの「ホーム画面に追加」でPWAインストール
3. **利用開始**: ユーザー登録不要ですぐに利用開始
4. **データ入力**: 取引や予算を入力して家計管理を開始

**推奨ブラウザ:**
- Chrome（最新版）
- Safari（最新版）
- Firefox（最新版）
- Edge（最新版）

---

## ❓ よくある質問

**Q: データはどこに保存されますか？**
A: 全てのデータはブラウザのIndexedDBに保存され、外部に送信されることはありません。

**Q: ブラウザのデータを削除するとどうなりますか？**
A: IndexedDBのデータも削除されるため、取引履歴等が失われます。重要なデータは定期的にエクスポートすることをお勧めします。

**Q: オフラインでも利用できますか？**
A: はい、完全にオフラインで利用可能です。ネットワーク接続は必要ありません。

**Q: 複数デバイスで同期できますか？**
A: 現在はローカル動作のみです。クラウド同期機能は将来実装予定です。

**Q: データの容量制限はありますか？**
A: IndexedDBの容量制限はブラウザ依存ですが、通常数百MBまで利用可能です。
